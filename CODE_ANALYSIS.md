# –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

## üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: SQL Injection (Backend)**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –ª–∏—Ç–µ—Ä–∞–ª–æ–≤ —Å —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∫–∞–≤—ã—á–∫–∞–º–∏ –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö
```go
// ‚ùå –¢–µ–∫—É—â–∏–π –∫–æ–¥ (project_repository.go:124)
tx.Unscoped().Where("\"ProjectId\" = ?", id).Delete(&models.ProjectTask{})
```

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TableName() –∏–ª–∏ —Ç–µ–≥–∏ GORM
```go
// ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥
tx.Unscoped().Where("project_id = ?", id).Delete(&models.ProjectTask{})
// –ò–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å NamingStrategy –≤ database.go
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –í—ã—Å–æ–∫–∏–π  
**–§–∞–π–ª—ã:** `repositories/project_repository.go`, `repositories/task_repository.go`, –≤—Å–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

---

### 2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: N+1 –∑–∞–ø—Ä–æ—Å—ã (Backend)**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ó–∞–≥—Ä—É–∑–∫–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ —Ü–∏–∫–ª–µ
```go
// ‚ùå –í GetProjects –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è Store –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –æ—Ç–¥–µ–ª—å–Ω–æ
```

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Preload
```go
// ‚úÖ –í project_repository.go
func (r *projectRepository) FindAll() ([]models.Project, error) {
    var projects []models.Project
    err := r.db.Preload("Store").Find(&projects).Error
    return projects, err
}
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† –°—Ä–µ–¥–Ω–∏–π  
**–§–∞–π–ª—ã:** `repositories/project_repository.go`, `repositories/task_repository.go`

---

### 3. **–£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏: –ù–µ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (Backend)**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ disconnect –∫–ª–∏–µ–Ω—Ç–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –º–æ–∂–µ—Ç –Ω–µ –æ—Å–≤–æ–±–æ–∂–¥–∞—Ç—å—Å—è

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å context —Å timeout –∏ defer
```go
// –í websocket handler
ctx, cancel := context.WithTimeout(context.Background(), 30*time.Second)
defer cancel()
defer conn.Close()
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† –°—Ä–µ–¥–Ω–∏–π  
**–§–∞–π–ª—ã:** `routes/routes.go` (WebSocket handler)

---

## üü° –°—Ä–µ–¥–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### 4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (Frontend)**
**–ü—Ä–æ–±–ª–µ–º–∞:** –û–±—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –±–µ–∑ –¥–µ—Ç–∞–ª–µ–π
```typescript
// ‚ùå –í projects.ts:50
catch (error) {
    throw new Error('Failed to delete project');
}
```

**–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏
```typescript
// ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥
catch (error) {
    if (axios.isAxiosError(error) && error.response) {
        throw new Error(error.response.data.message || 'Failed to delete project');
    }
    throw error;
}
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°—Ä–µ–¥–Ω–∏–π  
**–§–∞–π–ª—ã:** `services/projects.ts`, `services/tasks.ts`, –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã

---

### 5. **–¢–∏–ø–∏–∑–∞—Ü–∏—è: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å—Ç—Ä–æ–≥–∏—Ö —Ç–∏–ø–æ–≤ (Frontend)**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `any` –∏ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
```typescript
// ‚ùå –í types.ts
export interface Project {
    store?: Store; // –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –∏–ª–∏ null
}
```

**–†–µ—à–µ–Ω–∏–µ:** –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
```typescript
// ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥
export interface Project {
    id: number;
    store: Store | null;
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –∫–∞–∫ non-optional
}
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°—Ä–µ–¥–Ω–∏–π  
**–§–∞–π–ª—ã:** `types.ts`, –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

---

### 6. **–í–∞–ª–∏–¥–∞—Ü–∏—è: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ RBAC –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ (Frontend)**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–Ω–æ–ø–∫–∏ "–£–¥–∞–ª–∏—Ç—å", "–°–æ–∑–¥–∞—Ç—å" –≤–∏–¥–Ω—ã –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
```tsx
// ‚ùå –í Projects.tsx - –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤
<button onClick={handleDelete}>–£–¥–∞–ª–∏—Ç—å</button>
```

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö—É–∫ usePermissions
```tsx
// ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥
import { usePermissions } from '../hooks/usePermissions';

const { hasPermission } = usePermissions();

{hasPermission('projects:delete') && (
    <button onClick={handleDelete}>–£–¥–∞–ª–∏—Ç—å</button>
)}
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°—Ä–µ–¥–Ω–∏–π  
**–§–∞–π–ª—ã:** `Projects.tsx`, `ProjectDetails.tsx`, `Stores.tsx`

---

## üü¢ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 7. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ (Frontend)**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ –¥–∞–Ω–Ω—ã—Ö
```typescript
// ‚ùå –ü—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ Projects.tsx –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–æ–µ–∫—Ç—ã
```

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å React Query –∏–ª–∏ SWR
```typescript
// ‚úÖ –° React Query
import { useQuery } from '@tanstack/react-query';

const { data: projects } = useQuery({
    queryKey: ['projects'],
    queryFn: getProjects,
    staleTime: 5 * 60 * 1000, // 5 –º–∏–Ω—É—Ç
});
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–∏–∑–∫–∏–π (–£–ª—É—á—à–µ–Ω–∏–µ UX)  
**–§–∞–π–ª—ã:** –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –¥–∞–Ω–Ω—ã–º–∏

---

### 8. **–ò–Ω–¥–µ–∫—Å—ã –ë–î: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –Ω–∞ FK (Backend)**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–µ–¥–ª–µ–Ω–Ω—ã–µ JOIN –∑–∞–ø—Ä–æ—Å—ã

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –≤ –º–∏–≥—Ä–∞—Ü–∏–∏
```sql
-- –í –º–∏–≥—Ä–∞—Ü–∏–∏
CREATE INDEX idx_project_tasks_project_id ON "ProjectTasks"("ProjectId");
CREATE INDEX idx_user_activities_project_id ON "UserActivities"("ProjectId");
CREATE INDEX idx_user_activities_entity ON "UserActivities"("EntityType", "EntityId");
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–∏–∑–∫–∏–π (–µ—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–º–Ω–æ–≥–æ)  
**–§–∞–π–ª—ã:** –ù–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

---

### 9. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: –ò–∑–±—ã—Ç–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ production (Backend)**
**–ü—Ä–æ–±–ª–µ–º–∞:** –õ–æ–≥–∏ —É—Å–ø–µ—à–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
```go
// ‚ùå –í repository
log.Printf("Successfully deleted tasks for project %d", id)
```

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
```go
// ‚úÖ –° zerolog
logger.Debug().Uint("project_id", id).Msg("Deleted tasks")
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–∏–∑–∫–∏–π  
**–§–∞–π–ª—ã:** –í—Å–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

---

### 10. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å React: –ù–µ–Ω—É–∂–Ω—ã–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã (Frontend)**
**–ü—Ä–æ–±–ª–µ–º–∞:** –í—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ Projects —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
```tsx
// ‚ùå Projects.tsx - –Ω–µ—Ç –º–µ–º–æ–∏–∑–∞—Ü–∏–∏
const ProjectCard = ({ project }) => { ... }
```

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å React.memo
```tsx
// ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥
const ProjectCard = React.memo(({ project }: { project: Project }) => {
    // ...
});
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–∏–∑–∫–∏–π (–µ—Å–ª–∏ –Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é)  
**–§–∞–π–ª—ã:** `Projects.tsx`, `Tasks.tsx`

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1 (–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ - 1-2 –¥–Ω—è)
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å SQL queries —Å —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∫–∞–≤—ã—á–∫–∞–º–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å Preload –¥–ª—è —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å WebSocket cleanup

### –≠—Ç–∞–ø 2 (–°—Ä–µ–¥–Ω–∏–µ - 3-5 –¥–Ω–µ–π)
- [ ] –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–≥—É—é —Ç–∏–ø–∏–∑–∞—Ü–∏—é
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å RBAC –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

### –≠—Ç–∞–ø 3 (–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ - –ø–æ –∂–µ–ª–∞–Ω–∏—é)
- [ ] –í–Ω–µ–¥—Ä–∏—Ç—å React Query
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –ë–î
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] –ú–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫

1. **–î–µ–Ω—å 1:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (#1)
2. **–î–µ–Ω—å 2:** –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î (#2, #8)
3. **–î–µ–Ω—å 3-4:** –£–ª—É—á—à–∏—Ç—å —Ç–∏–ø–∏–∑–∞—Ü–∏—é –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ (#4, #5)
4. **–î–µ–Ω—å 5:** –î–æ–±–∞–≤–∏—Ç—å RBAC –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ (#6)
5. **–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏:** –í–Ω–µ–¥—Ä–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–µ–º–æ–∏–∑–∞—Ü–∏—é (#7, #10)

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –∏–∑–º–µ—Ä—å—Ç–µ:
- ‚è±Ô∏è –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã Projects: **—Ü–µ–ª—å < 500ms**
- üóÑÔ∏è –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ DB –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—é: **—Ü–µ–ª—å —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –Ω–∞ 30-50%**
- üêõ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ 500 –æ—à–∏–±–æ–∫: **—Ü–µ–ª—å 0**
- üîí –ù–∞—Ä—É—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏: **—Ü–µ–ª—å 0**

---

**–ê–≤—Ç–æ—Ä:** AI Code Analyzer  
**–î–∞—Ç–∞:** 2026-01-06  
**–ü—Ä–æ–µ–∫—Ç:** Portal Razvitie (Go + React)
