# –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥: –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞

## üìã –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### ‚úÖ –°–æ–∑–¥–∞–Ω—ã —É—Ç–∏–ª–∏—Ç–Ω—ã–µ –º–æ–¥—É–ª–∏

#### 1. `/utils/taskUtils.ts`
**–§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞–¥–∞—á–∞–º–∏:**
- `isUserTask()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ –∑–∞–¥–∞—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- `isOverdueTask()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞–¥–∞—á–∏
- `isExpiringSoonTask()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è
- `filterUserTasks()` - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `filterOverdueTasks()` - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
- `filterExpiringSoonTasks()` - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏—Å—Ç–µ–∫–∞—é—â–∏—Ö –∑–∞–¥–∞—á
- `getDaysUntilDeadline()` - —Ä–∞—Å—á–µ—Ç –¥–Ω–µ–π –¥–æ –¥–µ–¥–ª–∞–π–Ω–∞
- `getTaskDeviation()` - —Ä–∞—Å—á–µ—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –æ—Ç –ø–ª–∞–Ω–∞
- `getDeadlineClass()` - CSS-–∫–ª–∞—Å—Å –¥–ª—è –¥–µ–¥–ª–∞–π–Ω–∞
- `getDaysWord()` - —Å–∫–ª–æ–Ω–µ–Ω–∏–µ —Å–ª–æ–≤–∞ "–¥–µ–Ω—å"
- `getTimeAgo()` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ "N –º–∏–Ω/—á–∞—Å–æ–≤ –Ω–∞–∑–∞–¥"

#### 2. `/utils/uiHelpers.ts`
**UI-—É—Ç–∏–ª–∏—Ç—ã:**
- `getAvatarColor()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ü–≤–µ—Ç–∞ –∞–≤–∞—Ç–∞—Ä–∞ –ø–æ –∏–º–µ–Ω–∏
- `getInitials()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–æ–≤
- `getTaskStatusClass()` - CSS-–∫–ª–∞—Å—Å –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á–∏
- `getProjectStatusClass()` - CSS-–∫–ª–∞—Å—Å –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–æ–µ–∫—Ç–∞
- `getDetailedStatusColor()` - —Ü–≤–µ—Ç –ø–æ –¥–µ—Ç–∞–ª—å–Ω–æ–º—É —Å—Ç–∞—Ç—É—Å—É
- `getRoleColor()` - —Ü–≤–µ—Ç –ø–æ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `pluralize()` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ —Å–∫–ª–æ–Ω–µ–Ω–∏–µ —Å–ª–æ–≤
- `formatDate()` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã
- `formatTime()` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
- `formatDateTime()` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã –∏ –≤—Ä–µ–º–µ–Ω–∏

#### 3. `/utils/apiHelpers.ts`
**API-—É—Ç–∏–ª–∏—Ç—ã:**
- `handleApiError()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API
- `checkApiResponse()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—à–∏–±–∫–∏
- `serializeArrayField()` - —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–∞—Å—Å–∏–≤–∞ –≤ JSON
- `deserializeArrayField()` - –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è JSON –≤ –º–∞—Å—Å–∏–≤

---

### ‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤

#### 1. **services/tasks.ts**
**–ë—ã–ª–æ:** ~114 —Å—Ç—Ä–æ–∫ —Å –¥—É–±–ª–∏—Ä—É—é—â–µ–π—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫ –∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π  
**–°—Ç–∞–ª–æ:** ~84 —Å—Ç—Ä–æ–∫–∏ (+30 —Å—Ç—Ä–æ–∫ = **26% —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ**)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `checkApiResponse()` –≤–º–µ—Å—Ç–æ 4 –∫–æ–ø–∏–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- –í—ã–Ω–µ—Å–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `preparTaskForApi()` –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `deserializeArrayField()` –∏ `serializeArrayField()`

#### 2. **pages/Hero.tsx** 
**–ë—ã–ª–æ:** ~460 —Å—Ç—Ä–æ–∫ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π  
**–°—Ç–∞–ª–æ:** ~366 —Å—Ç—Ä–æ–∫ (+94 —Å—Ç—Ä–æ–∫–∏ = **20% —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ**)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –£–¥–∞–ª–µ–Ω—ã –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: `getDetailedStatusColor`, `getRoleColor`, `getDaysWord`, `getDaysUntilDeadline`, `getTimeAgo`
- –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ `processTasks()` —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `filterUserTasks()`, `filterOverdueTasks()`, `filterExpiringSoonTasks()`
- –ó–∞–º–µ–Ω—ë–Ω `getStatusClass` –Ω–∞ `getTaskStatusClass` –∏–∑ —É—Ç–∏–ª–∏—Ç

#### 3. **pages/Tasks.tsx**
**–ë—ã–ª–æ:** ~381 —Å—Ç—Ä–æ–∫ —Å –¥—É–±–ª–∏—Ä—É—é—â–µ–π—Å—è –ª–æ–≥–∏–∫–æ–π  
**–°—Ç–∞–ª–æ:** ~323 —Å—Ç—Ä–æ–∫–∏ (+58 —Å—Ç—Ä–æ–∫ = **15% —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ**)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –£–¥–∞–ª–µ–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–∞—è `getAvatarColor()`, `getInitials()`, `getStatusClass()`, `getDeadlineClass()`, `getTaskDeviation()`
- –£–ø—Ä–æ—â–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `isUserTask()`, `isOverdueTask()`, `isExpiringSoonTask()`
- –£–ø—Ä–æ—â–µ–Ω –ø–æ–¥—Å—á–µ—Ç –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —É—Ç–∏–ª–∏—Ç—ã

#### 4. **pages/Projects.tsx**
**–ë—ã–ª–æ:** ~465 —Å—Ç—Ä–æ–∫  
**–°—Ç–∞–ª–æ:** ~449 —Å—Ç—Ä–æ–∫ (+16 —Å—Ç—Ä–æ–∫ = **3% —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ**)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –£–¥–∞–ª–µ–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–∞—è `getAvatarColor()` –∏ `getStatusClass()`
- –ó–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ `getProjectStatusClass()` –∏–∑ —É—Ç–∏–ª–∏—Ç

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –£—Å—Ç—Ä–∞–Ω–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ:

| –§—É–Ω–∫—Ü–∏—è | –ë—ã–ª–æ –∫–æ–ø–∏–π | –°—Ç–∞–ª–æ | –≠–∫–æ–Ω–æ–º–∏—è —Å—Ç—Ä–æ–∫ |
|---------|-----------|-------|---------------|
| `getAvatarColor()` | 2 | 1 | ~30 |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API | 4 | 1 | ~40 |
| –õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∑–∞–¥–∞—á | 3 | 1 | ~70 |
| `getDaysUntilDeadline()` | 2 | 1 | ~40 |
| `getDeadlineClass()` | 2 | 1 | ~20 |
| `getTaskDeviation()` | 2 | 1 | ~15 |
| `getStatusClass()` | 3 | 2 (task/project) | ~10 |
| `getInitials()` | 2 | 1 | ~10 |

**–ò—Ç–æ–≥–æ:** ~235 —Å—Ç—Ä–æ–∫ –¥—É–±–ª–∏—Ä—É—é—â–µ–≥–æ—Å—è –∫–æ–¥–∞ —É—Å—Ç—Ä–∞–Ω–µ–Ω–æ

### –û–±—â–µ–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã:
- **–î–æ:** ~1420 —Å—Ç—Ä–æ–∫ (–≤ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö)
- **–ü–æ—Å–ª–µ:** ~1222 —Å—Ç—Ä–æ–∫–∏ (–≤–∫–ª—é—á–∞—è –Ω–æ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã)
- **–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ:** ~14% –æ–±—â–µ–≥–æ –∫–æ–¥–∞

---

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### Maintainability (–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å)
‚úÖ –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏  
‚úÖ –õ–µ–≥—á–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã  
‚úÖ –ú–µ–Ω—å—à–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

### Readability (–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å)
‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å—Ç–∞–ª–∏ –∫–æ—Ä–æ—á–µ –∏ –ø–æ–Ω—è—Ç–Ω–µ–µ  
‚úÖ –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏  
‚úÖ –ì–æ–≤–æ—Ä—è—â–∏–µ –∏–º–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–π

### Reusability (–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ—Å—Ç—å)
‚úÖ –£—Ç–∏–ª–∏—Ç—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö  
‚úÖ –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –º–æ–¥—É–ª–∏  
‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

### Performance (–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
‚úÖ –ù–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞  
‚úÖ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–∞—è –ª–æ–≥–∏–∫–∞ = –º–µ–Ω—å—à–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –±–∞–≥

---

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### TypeScript –æ—à–∏–±–∫–∏
–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–æ–≤ `User` –º–µ–∂–¥—É:
- `context/AuthContext.tsx` (–Ω–µ—Ç –ø–æ–ª—è `email`)
- `types/index.ts` (—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–µ `email`)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–∞ User –∏–ª–∏ —Å–¥–µ–ª–∞—Ç—å –ø–æ–ª–µ `email` –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º.

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç–∏–ø–∞–º–∏ User**
2. **–î–æ–±–∞–≤–∏—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è —É—Ç–∏–ª–∏—Ç–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π**
3. **–†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ custom hooks:**
   - `useTaskFilters()` - –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∑–∞–¥–∞—á
   - `useProjectStats()` - –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤
4. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å API —É—Ç–∏–ª–∏—Ç** —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```typescript
// –†–∞–Ω—å—à–µ (Hero.tsx, ~18 —Å—Ç—Ä–æ–∫)
let userTasks = [];
if (currentUser.role === '–ë–ê') {
    userTasks = allTasks;
} else {
    userTasks = allTasks.filter(task =>
        task.responsibleUserId === currentUser.id ||
        task.responsible === currentUser.name ||
        task.responsible === currentUser.role
    );
}

// –¢–µ–ø–µ—Ä—å (1 —Å—Ç—Ä–æ–∫–∞)
const userTasks = filterUserTasks(allTasks, currentUser);
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API
```typescript
// –†–∞–Ω—å—à–µ (tasks.ts, ~8 —Å—Ç—Ä–æ–∫ √ó 4 —Ä–∞–∑–∞)
if (!response.ok) {
    let errorMsg = 'Failed to...';
    try {
        const errorData = await response.json();
        if (errorData.error) errorMsg = errorData.error;
    } catch (e) { }
    throw new Error(errorMsg);
}

// –¢–µ–ø–µ—Ä—å (1 —Å—Ç—Ä–æ–∫–∞)
await checkApiResponse(response, 'Failed to...');
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ü–≤–µ—Ç–∞ –∞–≤–∞—Ç–∞—Ä–∞
```typescript
// –†–∞–Ω—å—à–µ: –¥—É–±–ª–∏—Ä–æ–≤–∞–ª–∞—Å—å –≤ Tasks.tsx –∏ Projects.tsx

// –¢–µ–ø–µ—Ä—å: –∏–º–ø–æ—Ä—Ç –∏–∑ –æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
import { getAvatarColor } from '../utils/uiHelpers';
```

---

**–î–∞—Ç–∞:** 2026-01-03  
**–ê–≤—Ç–æ—Ä —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:** Antigravity AI  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ
